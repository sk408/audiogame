<!DOCTYPE html>
<html>

<head>
    <title>Grid Line Intersections Game</title>
    <style>
        body {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }

        #gridCanvas1,
        #gridCanvas2 {
            border: 1px solid black;
            /* width: 25%; */
            /* height: 80%; */
        }

        @keyframes flash {
            0% {

                background-color: transparent;
            }

            50% {

                background-color: rgb(11, 154, 193);
            }

            100% {
                background-color: transparent;
            }
        }

        #decibelIndicator1.flashing,
        #decibelIndicator2.flashing {
            animation: flash 0.6s infinite;
            background-color: rgb(46, 158, 228);
        }

        .flashing {
            animation: flash 0.2s infinite;
        }

        #randomButton1.lightUp,
        #randomButton2.lightUp {
            background-color: #00ff00;
            /* Change this to the color you want */
        }
    </style>

</head>

<body>
    <div class="canvas-container">

        <canvas id="gridCanvas1"></canvas>
        <div id="scoreDisplay1">Score: 0</div>
        <button id="decibelIndicator1">Decibel Level: N/A</button>
        <button id="randomButton1">Response</button>
        <br>
        <button id="redButton1" style="display:  none;">Red</button>
        <button id="blueButton1" style="display:  none;">Blue</button>
        <br>
        <input type="number" id="numSquaresX1" value="12" min="1" style="display:  none;">
        <input type="number" id="numSquaresY1" value="13" min="1" style="display: none;">
        <button onclick="updateGrid('1')" style="display: none;">Update Grid</button>
    </div>
    <div class="canvas-container">

        <canvas id="gridCanvas2"></canvas>
        <div id="scoreDisplay2">Score: 0</div>
        <button id="decibelIndicator2">Decibel Level: N/A</button>
        <button id="randomButton2">Response</button> <br>
        <button id="redButton2" style="display:  none;">Red</button>
        <button id="blueButton2" style="display:  none;">Blue</button>
        <br>
        <input type="number" id="numSquaresX2" value="12" min="1" style="display:none;">
        <input type="number" id="numSquaresY2" value="13" min="1" style="display:none;">
        <button onclick="updateGrid('2')" style="display:none;">Update Grid</button>
    </div>
    <script>
        includeCanvasLogic(1, "#00f");
        includeCanvasLogic(2, "#f00");
        function includeCanvasLogic(canvasId, color) {
            console.log("Canvas logic included for canvas ID:", canvasId);

            const canvas = document.getElementById(`gridCanvas${canvasId}`);
            const ctx = canvas.getContext('2d');

            const dotRadius = 5;
            let dots = []; // Array to store the dots
            let gridSizeX = 50;
            let gridSizeY = 50;
            canvas.width = window.innerWidth / 4;
            canvas.height = window.innerHeight * .8;
            function redrawCanvas(gridSizeX, gridSizeY) {
                ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas

                const frequencies = [0, 125, 250, 500, 750, 1000, 1500, 2000, 3000, 4000, 6000, 8000];
                const decibels = Array.from({ length: canvas.height / gridSizeY + 1 }, (_, i) => -10 + i * 10);
                const decibelsHalf = Array.from({ length: canvas.height / (gridSizeY / 2) + 1 }, (_, i) => -10 + i * 5); // 5 decibel increments
                ctx.fillStyle = color;
                for (let i = 0; i <= frequencies.length; i++) {
                    const x = i * gridSizeX;
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, canvas.height);
                    ctx.fillText(frequencies[i] + "hz" || '', x + 5, 15); // Draw the frequency label
                }
                for (let i = 0; i <= decibels.length; i++) {
                    const y = i * gridSizeY;
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                    ctx.fillText(decibels[i] + "dB" || '', 5, y - 5); // Draw the decibel label
                }
                for (let i = 0; i <= decibelsHalf.length; i++) {
                    const y = i * (gridSizeY / 2);
                    // Don't draw the grid line, just the label
                    ctx.fillText(decibelsHalf[i] + "dB" || '', 5, y - 5); // Draw the decibel label
                }
                ctx.strokeStyle = "#ddd";
                ctx.stroke();

                // Redraw the dots
                for (let dot of dots) {
                    drawDot(dot.x, dot.y);
                }
                dots.sort((a, b) => a.x - b.x);
                for (let i = 0; i < dots.length - 1; i++) {
                    ctx.beginPath();
                    ctx.moveTo(dots[i].x, dots[i].y);
                    ctx.lineTo(dots[i + 1].x, dots[i + 1].y);
                    ctx.strokeStyle = '#000'; // Set the line color
                    ctx.stroke();
                }
            }
            let dotColor = color; // Default dot color
            redrawCanvas();
            updateGrid();
            function drawDot(x, y) {
                ctx.beginPath();
                ctx.arc(x, y, dotRadius, 0, Math.PI * 2);
                ctx.fillStyle = dotColor; // Use the current dot color
                ctx.fill();
            }
            document.getElementById(`redButton${canvasId}`).addEventListener('click', function () {
                dotColor = "#f00"; // Change dot color to red
                redrawCanvas();
                updateGrid(); // Redraw the canvas
            });
            document.getElementById(`blueButton${canvasId}`).addEventListener('click', function () {
                dotColor = "#00f"; // Change dot color to blue
                redrawCanvas();
                updateGrid(); // Redraw the canvas
            });
            let score = 0; // Initialize the score

            function placeDot(x, y) {
                dots = dots.filter(dot => dot.x !== x);
                dots.push({ x, y });
                redrawCanvas();
                updateGrid(); // Redraw the canvas

                // Calculate the frequency and decibel index of the placed dot
                const frequencyIndex = Math.floor(x / gridSizeX);
                const decibelLevel = -10 + Math.floor(y / (gridSizeY / 2)) * 5;

                // Check if the placed dot matches any of the random decibel levels
                if (randomDecibelLevels[frequencyIndex] === decibelLevel) {
                    score += 1000; // Increase the score by 1000
                } else {
                    score -= 5000; // Decrease the score by 100
                }
                document.getElementById(`scoreDisplay${canvasId}`).textContent = `Score: ${score}`; // Update the score display
            }
            function removeDot(index) {
                dots.splice(index, 1); // Remove the dot from the array
                redrawCanvas()
                updateGrid(); // Redraw the canvas
            }
            function updateGrid() {
                const numSquaresX = parseInt(document.getElementById(`numSquaresX${canvasId}`).value);
                const numSquaresY = parseInt(document.getElementById(`numSquaresY${canvasId}`).value);
                gridSizeX = canvas.width / numSquaresX;
                gridSizeY = canvas.height / numSquaresY;
                redrawCanvas(gridSizeX, gridSizeY);
            }
            let lastClickTime = 0;
            const doubleClickDelay = 500; // Time in milliseconds

            let clickCount = 0;

            canvas.addEventListener('click', function (e) {
                clickCount++;
                setTimeout(() => {
                    if (clickCount >= 2) {
                        // Double click detected
                        const rect = canvas.getBoundingClientRect();
                        const mouseX = e.clientX - rect.left;
                        const mouseY = e.clientY - rect.top;

                        const gridY = Math.round(mouseY / (gridSizeY / 2)) * (gridSizeY / 2); // Updated for 5db increments

                        const gridX = Math.round(mouseX / gridSizeX) * gridSizeX;

                        // Check if there is already a dot at this location
                        const dotIndex = dots.findIndex(dot => dot.x === gridX && dot.y === gridY);
                        if (dotIndex !== -1) {
                            removeDot(dotIndex); // If there is, remove it
                        } else {
                            placeDot(gridX, gridY); // If there isn't, add a new dot
                        }
                    }
                    clickCount = 0;
                }, doubleClickDelay);
            });
            const decibelIndicator = document.getElementById(`decibelIndicator${canvasId}`);
            let indicatorInterval;

            canvas.addEventListener('mousedown', function (e) {
                decibelIndicator.classList.add('flashing');

                const rect = canvas.getBoundingClientRect();
                const mouseY = e.clientY - rect.top;

                const gridY = Math.round(mouseY / (gridSizeY / 2)) * (gridSizeY / 2); // Updated for 5db increments
                const decibelIndex = gridY / (gridSizeY / 2);
                const decibelLevel = -10 + decibelIndex * 5; // Updated for 5db increments

                decibelIndicator.textContent = `Decibel Level: ${decibelLevel}dB`;

                indicatorInterval = setInterval(() => {
                    const rect = canvas.getBoundingClientRect();
                    const mouseY = e.clientY - rect.top;

                    const gridY = Math.round(mouseY / (gridSizeY / 2)) * (gridSizeY / 2); // Updated for 5db increments
                    const decibelIndex = gridY / (gridSizeY / 2);
                    const decibelLevel = -10 + decibelIndex * 5; // Updated for 5db increments

                    decibelIndicator.textContent = `Decibel Level: ${decibelLevel}dB`;
                }, 500);
            });
            canvas.addEventListener('mouseup', function (e) {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;

                // Check if the mouse is still over the canvas
                if (mouseX >= 0 && mouseX <= canvas.width && mouseY >= 0 && mouseY <= canvas.height) {
                    decibelIndicator.classList.remove('flashing');
                    clearInterval(indicatorInterval);
                }

                // Remove the lightUp class after 100ms
                setTimeout(() => {
                    document.getElementById(`randomButton${canvasId}`).classList.remove('lightUp');
                }, 100);
            });
            let randomDecibelLevels = [];
            function generateRandomDecibelLevels() {
                const frequencies = [0, 125, 250, 500, 750, 1000, 1500, 2000, 3000, 4000, 6000, 8000];
                randomDecibelLevels = frequencies.map((frequency) => {
                    const randomValue = Math.random();
                    let decibelValue;
                    let previousDecibelValue = null;
                    if (frequency <= 2000) {
                        if (previousDecibelValue === null || Math.random() >= 0.6) {
                            // Generate a completely random value if it's the first value or with 40% chance
                            const randomValue = Math.random();
                            if (randomValue < 0.55) { // 60% chance for 5 to 40
                                decibelValue = 5 + Math.floor(Math.random() * ((40 - 5) / 5 + 1)) * 5;
                            } else if (randomValue < 0.85) { // 30% chance for 40 to 60
                                decibelValue = 40 + Math.floor(Math.random() * ((60 - 40) / 5 + 1)) * 5;
                            } else if (randomValue < 0.95) { // 5% chance for 60 to 80
                                decibelValue = 60 + Math.floor(Math.random() * ((80 - 60) / 5 + 1)) * 5;
                            } else { // 5% chance for 80 to 115
                                decibelValue = 80 + Math.floor(Math.random() * ((115 - 80) / 5 + 1)) * 5;
                            }
                        } else {
                            // With 60% chance, generate a value within +/- 15 dB of the previous value
                            decibelValue = previousDecibelValue + (Math.floor(Math.random() * 7) - 3) * 5; // -15 to +15 dB in steps of 5
                            // Ensure decibelValue is within the allowed range
                            decibelValue = Math.max(5, Math.min(115, decibelValue));
                        }
                        previousDecibelValue = decibelValue;
                        return decibelValue;

                    }
                    else {
                        if (randomValue < 0.35) { // 60% chance for 5 to 40
                            decibelValue = 5 + Math.floor(Math.random() * ((40 - 5) / 5 + 1)) * 5;
                        } else if (randomValue < 0.70) { // 30% chance for 40 to 60
                            decibelValue = 40 + Math.floor(Math.random() * ((60 - 40) / 5 + 1)) * 5;
                        } else if (randomValue < 0.93) { // 5% chance for 60 to 80
                            decibelValue = 60 + Math.floor(Math.random() * ((80 - 60) / 5 + 1)) * 5;
                        } else { // 5% chance for 80 to 115
                            decibelValue = 80 + Math.floor(Math.random() * ((115 - 80) / 5 + 1)) * 5;
                        }
                        return decibelValue;
                    }
                });
            }

            document.getElementById(`randomButton${canvasId}`).addEventListener('click', function () {
                generateRandomDecibelLevels();
                console.log("Random decibel levels generated for each frequency:", randomDecibelLevels);
                // You can add any additional actions here, such as updating the UI
            });
            canvas.addEventListener('mousedown', function (e) {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;

                const gridY = Math.round(mouseY / (gridSizeY / 2)) * (gridSizeY / 2); // Updated for 5db increments
                const decibelIndex = gridY / (gridSizeY / 2);
                const decibelLevel = -10 + decibelIndex * 5; // Updated for 5db increments

                const gridX = Math.round(mouseX / gridSizeX) * gridSizeX;
                // const gridY = Math.round(mouseY / gridSizeY) * gridSizeY;
                const frequencyIndex = Math.floor(gridX / gridSizeX);
                // const decibelLevel = -10 + Math.floor(gridY / gridSizeY) * 10;

                // Generate a random number between 0 and 1
                const randomChance = Math.random();

                // Check if the decibel level matches or if the random chance is less than 0.1 (10%)
                if (randomDecibelLevels[frequencyIndex] <= decibelLevel || randomChance < 0.1) {
                    document.getElementById(`randomButton${canvasId}`).classList.add('lightUp');
                } else {
                    document.getElementById(`randomButton${canvasId}`).classList.remove('lightUp');
                }
            });

            generateRandomDecibelLevels();
            let tempX = null; // Store the temporary X
            let flashInterval = null; // Store the interval ID
            let holdStart; // Variable to track when the mouse was pressed down
            let holdTimeout; // Timeout to check if the hold duration exceeds 20ms

            canvas.addEventListener('mousedown', function (e) {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;

                const gridY = Math.round(mouseY / (gridSizeY / 2)) * (gridSizeY / 2); // Updated for 5db increments

                const gridX = Math.round(mouseX / gridSizeX) * gridSizeX;
                // const gridY = Math.round(mouseY / gridSizeY) * gridSizeY;

                tempX = { x: gridX, y: gridY };

                holdStart = Date.now(); // Record the time when the mouse was pressed down

                // Check if the mouse is held down for more than 20ms before starting to flash
                holdTimeout = setTimeout(() => {
                    // Start flashing
                    flashInterval = setInterval(() => {
                        // Draw a temporary X
                        ctx.beginPath();
                        ctx.moveTo(gridX - 10, gridY - 10);
                        ctx.lineTo(gridX + 10, gridY + 10);
                        ctx.moveTo(gridX + 10, gridY - 10);
                        ctx.lineTo(gridX - 10, gridY + 10);
                        ctx.strokeStyle = 'red';
                        ctx.stroke();

                        // Clear the X after a delay
                        setTimeout(() => {
                            redrawCanvas(gridSizeX, gridSizeY);
                        }, 100);
                    }, 300); // Adjust the flashing rate as needed
                }, 1); // Start flashing if held down for more than 20ms
            });
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            let oscillator;
            let gainNode;
            let beepInterval;
            canvas.addEventListener('mousedown', function (e) {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const frequencyIndex = Math.round(mouseX / gridSizeX);
                const frequencies = [0, 125, 250, 500, 750, 1000, 1500, 2000, 3000, 4000, 6000, 8000];
                const frequency = frequencies[frequencyIndex] || 440; // Default to A4 if out of bounds
                console.log("Frequency:", frequency);
                oscillator = audioCtx.createOscillator();
                gainNode = audioCtx.createGain();

                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);

                beepInterval = setInterval(() => {
                    oscillator = audioCtx.createOscillator(); // Recreate the oscillator for each beep
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);
                    oscillator.connect(gainNode);

                    gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime); // Start beep
                    oscillator.start(audioCtx.currentTime);
                    oscillator.stop(audioCtx.currentTime + 0.2); // Stop beep after 100ms
                }, 650); // Beep every half second
            });

            canvas.addEventListener('mouseup', function (e) {
                clearInterval(beepInterval); // Stop the beeping
                if (oscillator) {
                    oscillator.disconnect();
                }
            });
            canvas.addEventListener('mouseup', function (e) {
                if (tempX) {
                    // Stop flashing
                    clearInterval(flashInterval);
                    flashInterval = null;

                    // Clear the timeout if the mouse was released before 20ms
                    clearTimeout(holdTimeout);

                    // Redraw the canvas to clear the temporary X
                    redrawCanvas(gridSizeX, gridSizeY);
                    tempX = null;
                }
            });
            document.getElementById(`randomButton${canvasId}`).click();
            let oldGridSizeX = gridSizeX; // Keep track of the old grid size
            let oldGridSizeY = gridSizeY; // Keep track of the old grid size

            window.addEventListener('resize', function () {
                canvas.width = window.innerWidth / 4;
                canvas.height = window.innerHeight * .8;

                const numSquaresX = parseInt(document.getElementById(`numSquaresX${canvasId}`).value);
                const numSquaresY = parseInt(document.getElementById(`numSquaresY${canvasId}`).value);
                gridSizeX = canvas.width / numSquaresX;
                gridSizeY = canvas.height / numSquaresY;

                dots.forEach((dot, index) => {
                    dot.x = Math.round(dot.x / oldGridSizeX) * gridSizeX;
                    dot.y = Math.round(dot.y / (oldGridSizeY/2)) * (gridSizeY/2);
                });

                redrawCanvas(gridSizeX, gridSizeY);
                updateGrid();

                oldGridSizeX = gridSizeX;
                oldGridSizeY = gridSizeY;
            });
        }
        // function includeCanvasLogic(e,t){console.log("Canvas logic included for canvas ID:",e);let n=document.getElementById(`gridCanvas${e}`),l=n.getContext("2d"),o=[],$=50,i=50;function d(e,$){l.clearRect(0,0,n.width,n.height);let i=[0,125,250,500,750,1e3,1500,2e3,3e3,4e3,6e3,8e3],d=Array.from({length:n.height/$+1},(e,t)=>-10+10*t),r=Array.from({length:n.height/($/2)+1},(e,t)=>-10+5*t);l.fillStyle=t;for(let u=0;u<=i.length;u++){let a=u*e;l.moveTo(a,0),l.lineTo(a,n.height),l.fillText(i[u]+"hz",a+5,15)}for(let s=0;s<=d.length;s++){let f=s*$;l.moveTo(0,f),l.lineTo(n.width,f),l.fillText(d[s]+"dB",5,f-5)}for(let m=0;m<=r.length;m++){let g=m*($/2);l.fillText(r[m]+"dB",5,g-5)}for(let h of(l.strokeStyle="#ddd",l.stroke(),o))c(h.x,h.y);o.sort((e,t)=>e.x-t.x);for(let _=0;_<o.length-1;_++)l.beginPath(),l.moveTo(o[_].x,o[_].y),l.lineTo(o[_+1].x,o[_+1].y),l.strokeStyle="#000",l.stroke()}n.width=window.innerWidth/4,n.height=.8*window.innerHeight;let r=t;function c(e,t){l.beginPath(),l.arc(e,t,5,0,2*Math.PI),l.fillStyle=r,l.fill()}d(),a(),document.getElementById(`redButton${e}`).addEventListener("click",function(){r="#f00",d(),a()}),document.getElementById(`blueButton${e}`).addEventListener("click",function(){r="#00f",d(),a()});let u=0;function a(){let t=parseInt(document.getElementById(`numSquaresX${e}`).value),l=parseInt(document.getElementById(`numSquaresY${e}`).value);d($=n.width/t,i=n.height/l)}let s=0;n.addEventListener("click",function(t){s++,setTimeout(()=>{if(s>=2){let l=n.getBoundingClientRect(),r=t.clientX-l.left,c=t.clientY-l.top,f=Math.round(c/(i/2))*(i/2),m=Math.round(r/$)*$,h=o.findIndex(e=>e.x===m&&e.y===f);if(-1!==h){var _;_=h,o.splice(_,1),d(),a()}else!function t(n,l){(o=o.filter(e=>e.x!==n)).push({x:n,y:l}),d(),a();let r=Math.floor(n/$),c=-10+5*Math.floor(l/(i/2));g[r]===c?u+=1e3:u-=5e3,document.getElementById(`scoreDisplay${e}`).textContent=`Score: ${u}`}(m,f)}s=0},500)});let f=document.getElementById(`decibelIndicator${e}`),m;n.addEventListener("mousedown",function(e){f.classList.add("flashing");let t=n.getBoundingClientRect(),l=e.clientY-t.top,o=Math.round(l/(i/2))*(i/2),$=o/(i/2);f.textContent=`Decibel Level: ${-10+5*$}dB`,m=setInterval(()=>{let t=n.getBoundingClientRect(),l=e.clientY-t.top,o=Math.round(l/(i/2))*(i/2),$=o/(i/2);f.textContent=`Decibel Level: ${-10+5*$}dB`},500)}),n.addEventListener("mouseup",function(t){let l=n.getBoundingClientRect(),o=t.clientX-l.left,$=t.clientY-l.top;o>=0&&o<=n.width&&$>=0&&$<=n.height&&(f.classList.remove("flashing"),clearInterval(m)),setTimeout(()=>{document.getElementById(`randomButton${e}`).classList.remove("lightUp")},100)});let g=[];function h(){g=[0,125,250,500,750,1e3,1500,2e3,3e3,4e3,6e3,8e3].map(e=>{let t=Math.random(),n,l=null;if(!(e<=2e3))return t<.35?5+5*Math.floor(8*Math.random()):t<.7?40+5*Math.floor(5*Math.random()):t<.93?60+5*Math.floor(5*Math.random()):80+5*Math.floor(8*Math.random());if(null===l||Math.random()>=.6){let o=Math.random();n=o<.55?5+5*Math.floor(8*Math.random()):o<.85?40+5*Math.floor(5*Math.random()):o<.95?60+5*Math.floor(5*Math.random()):80+5*Math.floor(8*Math.random())}else n=Math.max(5,Math.min(115,n=l+(Math.floor(7*Math.random())-3)*5));return l=n,n})}document.getElementById(`randomButton${e}`).addEventListener("click",function(){h(),console.log("Random decibel levels generated for each frequency:",g)}),n.addEventListener("mousedown",function(t){let l=n.getBoundingClientRect(),o=t.clientX-l.left,d=t.clientY-l.top,r=Math.round(d/(i/2))*(i/2),c=r/(i/2),u=Math.round(o/$)*$,a=Math.floor(u/$);g[a]<=-10+5*c||.1>Math.random()?document.getElementById(`randomButton${e}`).classList.add("lightUp"):document.getElementById(`randomButton${e}`).classList.remove("lightUp")}),h();let _=null,v=null,y,B;n.addEventListener("mousedown",function(e){let t=n.getBoundingClientRect(),o=e.clientX-t.left,r=e.clientY-t.top,c=Math.round(r/(i/2))*(i/2),u=Math.round(o/$)*$;_={x:u,y:c},y=Date.now(),B=setTimeout(()=>{v=setInterval(()=>{l.beginPath(),l.moveTo(u-10,c-10),l.lineTo(u+10,c+10),l.moveTo(u+10,c-10),l.lineTo(u-10,c+10),l.strokeStyle="red",l.stroke(),setTimeout(()=>{d($,i)},100)},300)},1)});let E=new(window.AudioContext||window.webkitAudioContext),L,x,T;n.addEventListener("mousedown",function(e){let t=n.getBoundingClientRect(),l=e.clientX-t.left,o=Math.round(l/$),i=[0,125,250,500,750,1e3,1500,2e3,3e3,4e3,6e3,8e3][o]||440;console.log("Frequency:",i),L=E.createOscillator(),x=E.createGain(),L.type="sine",L.frequency.setValueAtTime(i,E.currentTime),L.connect(x),x.connect(E.destination),T=setInterval(()=>{(L=E.createOscillator()).type="sine",L.frequency.setValueAtTime(i,E.currentTime),L.connect(x),x.gain.setValueAtTime(.1,E.currentTime),L.start(E.currentTime),L.stop(E.currentTime+.2)},650)}),n.addEventListener("mouseup",function(e){clearInterval(T),L&&L.disconnect()}),n.addEventListener("mouseup",function(e){_&&(clearInterval(v),v=null,clearTimeout(B),d($,i),_=null)}),document.getElementById(`randomButton${e}`).click();let p=$,C=i;window.addEventListener("resize",function(){n.width=window.innerWidth/4,n.height=.8*window.innerHeight;let t=parseInt(document.getElementById(`numSquaresX${e}`).value),l=parseInt(document.getElementById(`numSquaresY${e}`).value);$=n.width/t,i=n.height/l,o.forEach((e,t)=>{e.x=Math.round(e.x/p)*$,e.y=Math.round(e.y/C)*i}),d($,i),a(),p=$,C=i})}includeCanvasLogic(1,"#00f"),includeCanvasLogic(2,"#f00");
    </script>
</body>

</html>
